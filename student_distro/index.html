<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
	<head>
	    <meta charset="utf-8">
	    <title>Sound Board</title>
	</head>
	<body>

	<div class="container">
	    <div class="header">
	        <h1>Welcome to the ~soundboard~</h1>
	    </div>
	    <div class="main">
        <p>This is a piano..... kind of.</p>
        <br/>
        <div class="button-container">
  	    	<button class="note-1">Note 1</button>
          <button class="decr-vel">Hit Note Softer</button>
          <button class="incr-note">Increase Note</button>
          <button class="decr-note">Decrease Note</button>
        </div>
	    </div>
	    <div id="footer"></div>
	</div>

	<script src="./primus.js" type="text/javascript"></script>
  <script src="//code.jquery.com/jquery-1.11.1.min.js" type="text/javascript"></script>
	<script type="text/javascript">
		
    var noisemakerServerAddr = 'http://localhost:8080';
    var myInfo = {};

    $(document).ready(function(){
      
      /** 
       Getting Pool and Rank assignments
       send empty object along to prevent double assigns */
      $.get(noisemakerServerAddr + '/assignment', myInfo, function(data){
        myInfo.pool = data.pool;
        myInfo.rank = data.rank;
      });

			var primus = Primus.connect('http://localhost:8080');
			primus.on('open', function () {
			  primus.send('soundboard join');
        console.log('successfully joined sound controller room!');
			});

			$('.note-1').click(function(){
        console.log(myInfo);
        primus.send('play note 1', myInfo);
        console.log('play note 1 event fired');
			});

		});
	</script>

	</body>
</html>
