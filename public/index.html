<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="utf-8">
    <title>CDTO-09</title>

    <!-- CSS -->
    <link href="css/styles.css" rel="stylesheet" type="text/css">

</head>
<body>

<div class="container">
    <div class="header">
        <h1>Oh Hey we got some stuff there!!</h1>
    </div>
    <div class="main"></div>
    <div id="footer"></div>
</div>

<!-- midi.js package -->
 <script src="./js/MIDI/AudioDetect.js" type="text/javascript"></script>
 <script src="./js/MIDI/LoadPlugin.js" type="text/javascript"></script>
 <script src="./js/MIDI/Plugin.js" type="text/javascript"></script>
 <script src="./js/MIDI/Player.js" type="text/javascript"></script>
 <script src="./js/Window/DOMLoader.XMLHttp.js" type="text/javascript"></script>
 <!-- extras -->
 <script src="./inc/Base64.js" type="text/javascript"></script>
 <script src="./inc/base64binary.js" type="text/javascript"></script>

 <script type="text/javascript">

window.onload = function () {
	MIDI.loadPlugin({
		soundfontUrl: "./soundfont/",
		instruments: [ "acoustic_grand_piano", "synth_drum" ],
		callback: function() {
			for( var i = 0; i < 50; i++){
				var note = 62 - (i % 8);
				var delay = i;
				var velocity = 127; //note hardness
				MIDI.programChange(0, 0);
				MIDI.programChange(1, 118);
								
				MIDI.setVolume(0, 127);

				MIDI.noteOn(0, note, velocity, delay);
				MIDI.noteOn(1, note, velocity, delay);
				MIDI.noteOn(1, note, velocity/2, delay + 0.5);
			}
		}
	});
};

</script>

</body>
</html>
